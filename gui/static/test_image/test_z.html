<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" name="viewport" />
    <script>
        var Module = {};
        var __cargo_web = {};
    </script>
</head>
<body>
    <canvas id="canvas" width = "1000px" height="700px"></canvas>
    <script>
        var RUST_BACKTRACE = 1;
        var FitType_None = 0;
        var FitType_Fill = 1;
        var FitType_Contain = 2;
        var FitType_Cover = 3;
        var FitType_ScaleDown = 4;
    </script>
    <script src="../../target/asmjs-unknown-emscripten/debug/gui.js"></script>
    <script src="../shader/clip.js"></script>
    <script src="../shader/color.js"></script>
    <script src="../shader/image.js"></script>
    <script src="../shader/text.js"></script>
    <script src="../shader/canvas_text.js"></script>
    <script src="../shader/init.js"></script>
    <script>
        var gui = Module._create_gui(engine, 1000, 700);
        var root, page01, page02, page03;

        setInterval(() => {
            Module._render(gui);
        }, 50);

        init();
        setTimeout(open_page01, 100);
        setTimeout(open_page03, 200);
        setTimeout(open_page01, 300);
        setTimeout(open_page03, 400);

        function open_page01() {
            page01 = createDIVPercent(100,100,0,0);
            var bg = createImage('./01.png', 500,500,0,0);
            var btn = createDIV(100,50,200,200);
            var btnIcon = createImage('./04.png', 100,50,0,0);
            // Module._set_overflow(gui, page01, true);
            // Module._set_overflow(gui, btn, true);
            
            Module._append_child(gui, bg, page01);
            Module._append_child(gui, btn, page01);
            Module._append_child(gui, btnIcon, btn);
            Module._append_child(gui, page01, root);
        }
        
        function open_page03() {
            page03 = createDIVPercent(100,100,0,0);
            var bg = createImage('./02.png', 500,500,0,0);
            var btn = createDIV(100,50,400,400);
            var btnIcon = createImage('./04.png', 100,50,0,0);
            
            Module._append_child(gui, bg, page03);
            Module._append_child(gui, btn, page03);
            Module._append_child(gui, btnIcon, btn);
            Module._append_child(gui, page03, root);
        }

        function close_page01() {
            Module._remove_child(gui, page01);
        }
        function close_page03() {
            Module._remove_child(gui, page03);
        }

        function init() {
            var node00 = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node00, 0);
            Module._set_overflow(gui, node00, true);
            Module._set_background_rgba_color(gui, node00, 0.0, 1.0, .0, 0.8);

            var node = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node, 0);
            Module._append_child(gui, node, node00);
            Module._set_overflow(gui, node, true);
            Module._set_background_rgba_color(gui, node, 1.0, 0.0, 1.0, 0.8);

            var node = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node, 0);
            Module._append_child(gui, node, node00);
            Module._set_overflow(gui, node, true);
            Module._set_background_rgba_color(gui, node, 1.0, 1.0, 0.0, 0.8);

            root = createDIVPercent(100,100,0,0);
            Module._set_display(gui, root, 0);
            Module._set_overflow(gui, root, true);
            Module._set_background_rgba_color(gui, root, 1.0, 0.0, 0.0, 0.8);
            Module._append_child(gui, root, node00);

            var node = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node, 1);
            Module._append_child(gui, node, node00);
            var node = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node, 1);
            Module._append_child(gui, node, node00);

            var node = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node, 1);
            Module._append_child(gui, node, node00);
            var node = createDIVPercent(100,100,0,0);
            Module._set_display(gui, node, 1);
            Module._append_child(gui, node, node00);

            Module._append_child(gui, node00, 1);
        }


        function createImage(src, width, height, left, top) {
            var img = Module._create_image_node(gui);

            Module._set_width(gui, img, width);
            Module._set_height(gui, img, height);
            Module._set_position(gui, img, 0, left);
            Module._set_position(gui, img, 1, top);
            Module._set_position_type(gui, img, 1);

            var image = new Image();

            image.onload = () => {
                window.__jsObj = image;
                window.__jsObj1 = src;
                Module._set_src(gui, img, 1, 0);
            };
            image.src = src;

            return img;
        }

        function createDIV(w, h, l, t) {
            var node = Module._create_node(gui);
            Module._set_width(gui, node, w);
            Module._set_height(gui, node, h);
            Module._set_position(gui, node, 0, l);
            Module._set_position(gui, node, 1, t);
            Module._set_position_type(gui, node, 1);

            return node;
        }
        function createDIVPercent(w, h, l, t) {
            var node = Module._create_node(gui);
            Module._set_width_percent(gui, node, w);
            Module._set_height_percent(gui, node, h);
            Module._set_position(gui, node, 0, l);
            Module._set_position(gui, node, 1, t);
            Module._set_position_type(gui, node, 1);
            // Module._set_background_rgba_color(gui, node, 1.0, 0.0, 0.0, 0.2);

            return node;
        }


    </script>
</body>
</html>