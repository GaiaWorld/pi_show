<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" name="viewport" />
    <script>
        var Module = {};
        var __cargo_web = {};
    </script>
</head>
<body>
    <canvas id="canvas" width = "1000px" height="700px"></canvas>
    <script>
        var YGEdgeLeft = 0;
        var YGEdgeTop = 1;
        var YGEdgeRight = 2;
        var YGEdgeBottom = 3;
        var YGEdgeStart = 4;
        var YGEdgeEnd = 5;
        var YGEdgeHorizontal = 6;
        var YGEdgeVertical = 7;
        var YGEdgeAll = 8;
        
        var BorderImageRepeatType_Stretch = 0; // 拉伸源图像的边缘区域以填充每个边界之间的间隙。
        var BorderImageRepeatType_Repeat = 1; // 源图像的边缘区域被平铺（重复）以填充每个边界之间的间隙。可以修剪瓷砖以实现适当的配合。
        var BorderImageRepeatType_Round = 2; // 源图像的边缘区域被平铺（重复）以填充每个边界之间的间隙。可以拉伸瓷砖以实现适当的配合。
        var BorderImageRepeatType_Space = 3;// 源图像的边缘区域被平铺（重复）以填充每个边界之间的间隙。可以缩小瓷砖以实现适当的配合。
    </script>
    </script>
    <script src="../../target/asmjs-unknown-emscripten/debug/gui.js"></script>
    <script src="../shader/clip.js"></script>
    <script src="../shader/color.js"></script>
    <script src="../shader/image.js"></script>
    <script src="../shader/text.js"></script>
    <script src="../shader/init.js"></script>
    <script>
        var gui = Module._create_gui(engine, 1000, 700);


        var node = Module._create_node(gui);
        Module._append_child(gui, node, 1);
        Module._set_width(gui, node, 500);
        Module._set_height(gui, node, 500);
        Module._set_border(gui, node, YGEdgeAll, 20);
        Module._set_border_image_clip(gui, node, 0, 0, 0.609375, 0.609375);
        Module._set_border_image_slice(gui, node, 0.333, 0.333, 0.333, 0.333, true);
        Module._set_border_image_repeat(gui, node, BorderImageRepeatType_Round, BorderImageRepeatType_Space);
        // var root = Module._create_node(gui);
        // Module._append_child(gui, body, root);
        // Module._set_width(gui, node, 512);
        // Module._set_height(gui, node, 512);
        // Module._set_backgroud_rgba_color(gui, root, 0.5, 0.5, 0.5, 1.0);

        // Module._run(gui);
        
        var image = new Image();

        image.onload = () => {
            window.__jsObj = image;
            window.__jsObj1 = "./border.png";
            Module._set_border_src(gui, node, 0, 0);

            Module._render(gui);
            
            // //修改图片
            // setTimeout(() => {
            //     var image = new Image();
            //     window.__jsObj1 = "./test_image.jpg";
            //     image.onload = () => {
            //         window.__jsObj = image;
            //         window.__jsObj = image;                
            //         Module._set_src(gui, image_node, 0, 0);
            //         Module._run(gui);
            //     };
            //     image.src = "./test_image.jpg";
            // }, 2000);
        };
        image.src = "./border.png";

    </script>
</body>
</html>